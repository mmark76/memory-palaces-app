<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Memory Palaces Application</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <link rel="icon" type="image/x-icon" href="favicon.ico">
  <link rel="stylesheet" href="style.css">
</head>
<body>
  <div class="container">

    <!-- Top bar: image + title + instructions button -->
    <div class="top-row">
      <div class="header-row">
        <img
          src="image-memory-palace.png"
          alt="Memory palace illustration"
          class="header-image"
        >
        <h1>Memory Palaces Application</h1>
      </div>

      <button class="instructions-btn" type="button" onclick="toggleHelp()">
        Instructions
      </button>
    </div>

    <!-- Instructions overlay -->
    <div id="instructionsOverlay" class="overlay hidden" onclick="toggleHelp()"></div>
    <div id="helpPanel" class="help-panel hidden" aria-hidden="true">
      <div class="help-box">
        <h2>How to use this app</h2>
        <p>1. Create a new memory palace with a name that reminds you of a real or imaginary place.</p>
        <p>2. Inside each palace, add loci (specific spots) and attach an association or small story to every locus.</p>
        <p>3. Use the flashcards mode to practise: either see the locus and recall the association, or the reverse.</p>
        <p>4. When you are happy with your palaces, click “Save my palaces in this browser” so they are stored locally.</p>
        <p>5. You can upload your own picture for the header to match the current palace you are training.</p>
      </div>
    </div>

    <!-- Upload custom image -->
    <div class="section">
      <label for="palaceImageUpload" class="field-label">
        Upload your own memory palace image
      </label>
      <input id="palaceImageUpload" type="file" accept="image/*">
    </div>

    <!-- Create palace -->
    <div class="section">
      <label for="palaceName" class="field-label">
        Create your own Memory Palace
      </label>
      <div class="inline-form">
        <input id="palaceName" type="text" placeholder="Palace name">
        <button type="button" onclick="createPalace()">Create</button>
      </div>
    </div>

    <!-- List of palaces + save button -->
    <div class="section">
      <div class="section-header">
        <h2>My Memory Palaces</h2>
        <button type="button" onclick="savePalaces()">
          Save my palaces in this browser
        </button>
      </div>
      <ul id="palaceList" class="palace-list"></ul>
    </div>

    <!-- Selected palace details -->
    <div id="selectedPalace" class="section hidden">
      <h2 id="palaceTitle">Your Memory Palace</h2>

      <label class="field-label" for="newLocusName">
        Add locus and association
      </label>
      <div class="inline-form">
        <input id="newLocusName" type="text" placeholder="Locus description (e.g. front door)">
        <input id="newLocusAssociation" type="text" placeholder="Association / image / story">
        <button type="button" onclick="addLocus()">Add locus</button>
      </div>

      <ol id="locusList" class="locus-list"></ol>

      <!-- Flashcards practice -->
      <div id="flashcardsSection" class="section flashcards hidden">
        <h3>Practice as flashcards</h3>

        <div class="flashcards-controls">
          <label for="flashcardMode">Mode:</label>
          <select id="flashcardMode">
            <option value="locusToAssoc">Show locus → recall association</option>
            <option value="assocToLocus">Show association → recall locus</option>
          </select>

          <button type="button" onclick="startFlashcards()">
            Start flashcards
          </button>
        </div>

        <div id="flashcardBox" class="flashcard-box hidden">
          <p id="flashcardPrompt" class="flashcard-prompt"></p>

          <button type="button" onclick="revealFlashcard()">
            Show answer
          </button>

          <p id="flashcardAnswer" class="flashcard-answer hidden"></p>

          <div class="flashcard-nav">
            <button type="button" onclick="prevFlashcard()">Previous</button>
            <button type="button" onclick="nextFlashcard()">Next</button>
          </div>
        </div>
      </div>
    </div>

  </div>

  <script src="script.js"></script>
</body>
</html>
